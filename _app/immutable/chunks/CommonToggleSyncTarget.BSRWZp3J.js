import{s as Q,e as R,c as W,g as T,M as D,t as q,E as A,N as ae,i as X,v as f,n as B,f as C,w as le,k as Z,z as S,O as m,a as re,b as ce,d as oe,h as fe}from"./scheduler.CDAxP_dO.js";import{S as p,i as v,c as E,a as L,m as P,t as U,d as F,e as M}from"./index.C5tY04hK.js";import{c as I,b as Y,B as Se,h as G}from"./stores.CL0Ginyx.js";import{s as be}from"./storeUserSettings.8mNvglE9.js";import{r as H}from"./CommonItemMember.DwXs3_nd.js";import{b as z}from"./control.CYGDG-9S.js";import{s as d}from"./storeSyncStatus.BTeLX2g8.js";import{u as J,D as ye}from"./dbEventLogsDataHandlersSyncStatusUpdateDbItemSyncStatus.DIvHEfTs.js";import"./storeRpcSettings.BR5-jVLy.js";import"./dbBase.v7bNj48_.js";function de(e){let s,t,i,l;return{c(){s=R("input"),this.h()},l(u){s=W(u,"INPUT",{type:!0,class:!0,style:!0}),this.h()},h(){T(s,"type","checkbox"),s.__value=e[3],D(s,s.__value),s.disabled=e[4],T(s,"class",t=q(I(H[e[2]],"rounded",e[5],"appearance-none","disabled:opacity-50","cursor-pointer disabled:cursor-not-allowed"))+" svelte-hiulqb"),A(s,"--url","url("+e[6]+")"),(e[0]===void 0||e[1]===void 0)&&ae(()=>e[20].call(s))},m(u,n){X(u,s,n),s.checked=e[0],s.indeterminate=e[1],i||(l=[f(s,"change",e[20]),f(s,"keyup",e[10]),f(s,"keydown",e[11]),f(s,"keypress",e[12]),f(s,"focus",e[13]),f(s,"blur",e[14]),f(s,"click",e[15]),f(s,"mouseover",e[16]),f(s,"mouseenter",e[17]),f(s,"mouseleave",e[18]),f(s,"paste",e[19])],i=!0)},p(u,[n]){n&8&&(s.__value=u[3],D(s,s.__value)),n&16&&(s.disabled=u[4]),n&36&&t!==(t=q(I(H[u[2]],"rounded",u[5],"appearance-none","disabled:opacity-50","cursor-pointer disabled:cursor-not-allowed"))+" svelte-hiulqb")&&T(s,"class",t),n&64&&A(s,"--url","url("+u[6]+")"),n&1&&(s.checked=u[0]),n&2&&(s.indeterminate=u[1])},i:B,o:B,d(u){u&&C(s),i=!1,le(l)}}}function ge(e,s,t){let i;Z(e,be,a=>t(9,i=a));let{size:l="md"}=s,{group:u=[]}=s,{value:n=""}=s,{checked:r=void 0}=s,{indeterminate:o=!1}=s,{disabled:b=!1}=s,g,_,c;function y(a){S.call(this,e,a)}function h(a){S.call(this,e,a)}function k(a){S.call(this,e,a)}function N(a){S.call(this,e,a)}function $(a){S.call(this,e,a)}function ee(a){S.call(this,e,a)}function se(a){S.call(this,e,a)}function te(a){S.call(this,e,a)}function ne(a){S.call(this,e,a)}function ie(a){S.call(this,e,a)}function ue(){r=this.checked,o=this.indeterminate,t(0,r),t(7,u),t(3,n),t(1,o)}return e.$$set=a=>{"size"in a&&t(2,l=a.size),"group"in a&&t(7,u=a.group),"value"in a&&t(3,n=a.value),"checked"in a&&t(0,r=a.checked),"indeterminate"in a&&t(1,o=a.indeterminate),"disabled"in a&&t(4,b=a.disabled)},e.$$.update=()=>{if(e.$$.dirty&512&&t(8,g=i.themeColor),e.$$.dirty&137){const a=u.indexOf(n);r===void 0&&t(0,r=a>=0),r?a<0&&(u.push(n),t(7,u),t(3,n),t(0,r)):a>=0&&(u.splice(a,1),t(7,u),t(3,n),t(0,r))}e.$$.dirty&259&&(o?(t(5,_="bg-yellow-500"),t(6,c=`${z}/checkboxIndeterminate.svg`)):r?(t(5,_=Y[g].success.bg),t(6,c=`${z}/checkboxChecked.svg`)):(t(5,_=Y[g].error.bg),t(6,c=`${z}/checkboxCross.svg`)))},[r,o,l,n,b,_,c,u,g,i,y,h,k,N,$,ee,se,te,ne,ie,ue]}class he extends p{constructor(s){super(),v(this,s,ge,de,Q,{size:2,group:7,value:3,checked:0,indeterminate:1,disabled:4})}}async function me(e,s,t){await J(e,s,"isSyncTarget",t),await J(e,s,"numOfSyncTargetContract",t?1:0)}async function _e(e,s,t,i){s&&t&&i?await x(e,s,t,i):s&&t&&!i?await j(e,s,t):s&&!t&&!i?await V(e,s):await ke(e)}async function ke(e){const s=[],t=w(m(d),void 0,e);for(const i in m(d)[e].subSyncStatuses)s.push(V(e,i,t));await Promise.all(s)}async function V(e,s,t){const i=[];t=w(m(d),t,e,s);for(const l in m(d)[e].subSyncStatuses[s].subSyncStatuses)i.push(j(e,s,l,t));await Promise.all(i)}async function j(e,s,t,i){const l=[];i=w(m(d),i,e,s,t);for(const u in m(d)[e].subSyncStatuses[s].subSyncStatuses[t].subSyncStatuses)l.push(x(e,s,t,u,i));await Promise.all(l)}async function x(e,s,t,i,l){const u=new ye({chainName:e,projectName:s,versionName:t});l=w(m(d),l,e,s,t,i),await me(u,i,l)}function w(e,s,t,i,l,u){if(s===void 0){let n=!0;i&&l&&u?n=e[t].subSyncStatuses[i].subSyncStatuses[l].subSyncStatuses[u].isSyncTarget:i&&l&&!u?n=e[t].subSyncStatuses[i].subSyncStatuses[l].isSyncTarget:i&&!l&&!u?n=e[t].subSyncStatuses[i].isSyncTarget:n=e[t].isSyncTarget,s=!n}return s}function Te(e){let s,t,i,l,u;return t=new he({props:{checked:e[3].isSyncTarget,indeterminate:O(e[3].subSyncStatuses),size:e[1],disabled:e[2](e[0]).isSyncing}}),t.$on("click",e[4]),l=new Se({props:{textSize:G(e[1],1),text:K(e[3])}}),{c(){s=R("div"),E(t.$$.fragment),i=re(),E(l.$$.fragment),this.h()},l(n){s=W(n,"DIV",{class:!0});var r=ce(s);L(t.$$.fragment,r),i=oe(r),L(l.$$.fragment,r),r.forEach(C),this.h()},h(){T(s,"class",I("flex","flex-row","w-fit","space-x-2","items-center"))},m(n,r){X(n,s,r),P(t,s,null),fe(s,i),P(l,s,null),u=!0},p(n,[r]){const o={};r&8&&(o.checked=n[3].isSyncTarget),r&8&&(o.indeterminate=O(n[3].subSyncStatuses)),r&2&&(o.size=n[1]),r&5&&(o.disabled=n[2](n[0]).isSyncing),t.$set(o);const b={};r&2&&(b.textSize=G(n[1],1)),r&8&&(b.text=K(n[3])),l.$set(b)},i(n){u||(U(t.$$.fragment,n),U(l.$$.fragment,n),u=!0)},o(n){F(t.$$.fragment,n),F(l.$$.fragment,n),u=!1},d(n){n&&C(s),M(t),M(l)}}}const O=e=>{if(e){let s=Object.values(e);return!s.every(i=>i.isSyncTarget===s[0].isSyncTarget)}else return!1},K=e=>e.subSyncStatuses?O(e.subSyncStatuses)?"Partially":e.isSyncTarget?"All":"Nothing":e.isSyncTarget?"Yes":"No";function we(e,s,t){let i,l;Z(e,d,c=>t(8,l=c));let{targetChain:u}=s,{targetProject:n=void 0}=s,{targetVersion:r=void 0}=s,{targetContract:o=void 0}=s,{size:b}=s,g;const _=async()=>{await _e(u.name,n==null?void 0:n.name,r==null?void 0:r.name,o==null?void 0:o.name)};return e.$$set=c=>{"targetChain"in c&&t(0,u=c.targetChain),"targetProject"in c&&t(5,n=c.targetProject),"targetVersion"in c&&t(6,r=c.targetVersion),"targetContract"in c&&t(7,o=c.targetContract),"size"in c&&t(1,b=c.size)},e.$$.update=()=>{e.$$.dirty&256&&t(2,i=(c,y,h,k)=>y&&h&&k?l[c.name].subSyncStatuses[y.name].subSyncStatuses[h.name].subSyncStatuses[k.name]:y&&h&&!k?l[c.name].subSyncStatuses[y.name].subSyncStatuses[h.name]:y&&!h&&!k?l[c.name].subSyncStatuses[y.name]:l[c.name]),e.$$.dirty&229&&t(3,g=i(u,n,r,o))},[u,b,i,g,_,n,r,o,l]}class Pe extends p{constructor(s){super(),v(this,s,we,Te,Q,{targetChain:0,targetProject:5,targetVersion:6,targetContract:7,size:1})}}export{Pe as C,K as s};
