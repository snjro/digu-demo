import{_ as z}from"../chunks/_page.DqbFwUcd.js";import{s as D,l as w,i as I,f as H,k as T,I as E,L as $}from"../chunks/scheduler.CDAxP_dO.js";import{S as k,i as j,g as O,d as f,b as R,t as p,c as g,a as d,m as b,e as _,f as A}from"../chunks/index.C5tY04hK.js";import{c as V,g as B,B as G,s as L,p as W}from"../chunks/stores.C9_zYEKn.js";import{p as M,q,j as x}from"../chunks/CommonItemMember.CRanTEMj.js";import{B as K}from"../chunks/BaseGrid.Bx-vSWhf.js";import{b as U,n as J}from"../chunks/storeRpcSettings.CTg7fdRt.js";import"../chunks/dbBase.BEbG6e0G.js";import{s as P}from"../chunks/storeSyncStatus.CLF-ij8b.js";import"../chunks/dbSettings.BGfBQg8B.js";/* empty css                    */import{a as v,c as Q}from"../chunks/AbiParamsTable.DCGQsMD1.js";import{c as X}from"../chunks/columnDefAbiParams.iFg1BaLn.js";function Y({params:a}){return Z({params:a})}function Z({params:a}){const e=z({params:a}),t=e.targetContract.events.abiFragments;return{...e,targetEventAbiFragments:t}}const Te=Object.freeze(Object.defineProperty({__proto__:null,load:Y},Symbol.toStringTag,{value:"Module"})),h=L.grid,ee=V(""),S=!0,N=!1,te=a=>({headerName:"Basic",openByDefault:!1,children:[{headerName:"Event Name",sortable:S,editable:N,cellClass:ee,columnGroupShow:void 0,valueGetter:t=>t.data?t.data.eventName:"",cellRenderer:v((t,n)=>{n.data&&new B({target:t.eGui,props:{text:n.data.eventName,href:`${a}${n.data.eventName}#${U(M[0])}`,textSize:h,openNewTab:!1,prefixIcon:{name:"databaseOutline",size:h}}})})},{field:"eventAnonymous",headerName:"Anonymous",sortable:S,editable:N,cellClass:"flex justify-center",columnGroupShow:"open",cellDataType:!1},{headerName:"Topic Hash",sortable:S,editable:N,cellClass:"flex justify-center",columnGroupShow:"open",valueGetter:t=>t.data?t.data.eventTopicHash:"",cellRenderer:v((t,n)=>{n.data&&new G({target:t.eGui,props:{text:n.data.eventTopicHash,textSize:h,fontMono:!0,showCopyButton:!0}})})}]}),ne=a=>X("eventInputs","inputs",a,!0);function ae(a){let e,t;return e=new G({props:{text:a[1],textSize:a[3]}}),{c(){g(e.$$.fragment)},l(n){d(e.$$.fragment,n)},m(n,o){b(e,n,o),t=!0},p(n,o){const u={};o&2&&(u.text=n[1]),e.$set(u)},i(n){t||(p(e.$$.fragment,n),t=!0)},o(n){f(e.$$.fragment,n),t=!1},d(n){_(e,n)}}}function re(a){let e,t;return e=new B({props:{text:a[1],href:a[2],textSize:a[3],openNewTab:!1}}),{c(){g(e.$$.fragment)},l(n){d(e.$$.fragment,n)},m(n,o){b(e,n,o),t=!0},p(n,o){const u={};o&2&&(u.text=n[1]),e.$set(u)},i(n){t||(p(e.$$.fragment,n),t=!0)},o(n){f(e.$$.fragment,n),t=!1},d(n){_(e,n)}}}function se(a){let e,t,n,o;const u=[re,ae],r=[];function l(s,c){return s[0]>0?0:1}return e=l(a),t=r[e]=u[e](a),{c(){t.c(),n=w()},l(s){t.l(s),n=w()},m(s,c){r[e].m(s,c),I(s,n,c),o=!0},p(s,[c]){let m=e;e=l(s),e===m?r[e].p(s,c):(O(),f(r[m],1,1,()=>{r[m]=null}),R(),t=r[e],t?t.p(s,c):(t=r[e]=u[e](s),t.c()),p(t,1),t.m(n.parentNode,n))},i(s){o||(p(t),o=!0)},o(s){f(t),o=!1},d(s){s&&H(n),r[e].d(s)}}}function oe(a,e,t){let n;T(a,P,i=>t(7,n=i));let{contractIdentifier:o}=e,{targetEventName:u}=e,{urlPathName:r}=e,l=0;const s=`${r}${u}${q("Event Logs (text)")}`;let c;const m=L.grid;return a.$$set=i=>{"contractIdentifier"in i&&t(4,o=i.contractIdentifier),"targetEventName"in i&&t(5,u=i.targetEventName),"urlPathName"in i&&t(6,r=i.urlPathName)},a.$$.update=()=>{a.$$.dirty&176&&t(0,l=n[o.chainName].subSyncStatuses[o.projectName].subSyncStatuses[o.versionName].subSyncStatuses[o.contractName].events[u].recordCount),a.$$.dirty&1&&t(1,c=J(l))},[l,c,s,m,o,u,r,n]}class ue extends k{constructor(e){super(),j(this,e,oe,se,D,{contractIdentifier:4,targetEventName:5,urlPathName:6})}}const le=(a,e)=>({headerName:"Num of Logs",sortable:!0,editable:!1,cellStyle:Q("end"),columnGroupShow:void 0,valueGetter:t=>{var n;return ie(a,(n=t.data)==null?void 0:n.eventName)},cellRenderer:v((t,n)=>{new ue({target:t.eGui,props:{contractIdentifier:a,targetEventName:n.data.eventName,urlPathName:e}})})}),ie=(a,e)=>{let t=0;return e&&P.subscribe(n=>{t=n[a.chainName].subSyncStatuses[a.projectName].subSyncStatuses[a.versionName].subSyncStatuses[a.contractName].events[e].recordCount}),t},C=(a,e,t)=>[te(a),le(t,a),ne(e)],ce=a=>{const e=[];for(const t of a){const n={eventName:t.name,eventAnonymous:t.anonymous,eventTopicHash:t.topicHash,eventInputs:t.inputs};e.push(n)}return e};function me(a){let e,t,n;function o(r){a[6](r)}let u={rows:a[2],paramColumnDefs:C(a[4].url.pathname,a[5](),{chainName:a[0].targetChain.name,projectName:a[0].targetProject.name,versionName:a[0].targetVersion.name,contractName:a[1]}),hasMultipulTabs:!1,exportFilePrefix:"events"};return a[3]!==void 0&&(u.isFullScreen=a[3]),e=new K({props:u}),E.push(()=>A(e,"isFullScreen",o)),{c(){g(e.$$.fragment)},l(r){d(e.$$.fragment,r)},m(r,l){b(e,r,l),n=!0},p(r,l){const s={};l&4&&(s.rows=r[2]),l&19&&(s.paramColumnDefs=C(r[4].url.pathname,r[5](),{chainName:r[0].targetChain.name,projectName:r[0].targetProject.name,versionName:r[0].targetVersion.name,contractName:r[1]})),!t&&l&8&&(t=!0,s.isFullScreen=r[3],$(()=>t=!1)),e.$set(s)},i(r){n||(p(e.$$.fragment,r),n=!0)},o(r){f(e.$$.fragment,r),n=!1},d(r){_(e,r)}}}function fe(a){let e,t,n;function o(r){a[7](r)}let u={titleProps:{titleText:a[1],titleCategoryLabelText:F},$$slots:{PageWrapperContent:[me]},$$scope:{ctx:a}};return a[3]!==void 0&&(u.isFullScreen=a[3]),e=new x({props:u}),E.push(()=>A(e,"isFullScreen",o)),{c(){g(e.$$.fragment)},l(r){d(e.$$.fragment,r)},m(r,l){b(e,r,l),n=!0},p(r,[l]){const s={};l&2&&(s.titleProps={titleText:r[1],titleCategoryLabelText:F}),l&287&&(s.$$scope={dirty:l,ctx:r}),!t&&l&8&&(t=!0,s.isFullScreen=r[3],$(()=>t=!1)),e.$set(s)},i(r){n||(p(e.$$.fragment,r),n=!0)},o(r){f(e.$$.fragment,r),n=!1},d(r){_(e,r)}}}const F="Events";function pe(a,e,t){let n;T(a,W,i=>t(4,n=i));let{data:o}=e,u,r=[];const l=()=>{let i=0;return r.forEach(y=>{y.eventInputs.length>i&&(i=y.eventInputs.length)}),i};let s=!1;function c(i){s=i,t(3,s)}function m(i){s=i,t(3,s)}return a.$$set=i=>{"data"in i&&t(0,o=i.data)},a.$$.update=()=>{a.$$.dirty&1&&t(1,u=o.targetContract.name),a.$$.dirty&1&&t(2,r=ce(o.targetEventAbiFragments))},[o,u,r,s,n,l,c,m]}class Ee extends k{constructor(e){super(),j(this,e,pe,fe,D,{data:0})}}export{Ee as component,Te as universal};
